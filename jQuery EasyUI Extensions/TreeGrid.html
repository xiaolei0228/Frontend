<!DOCTYPE html>
<html>
<head>
    <title>TreeGrid</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <script src="resource/jquery/jquery-1.11.0.min.js" type="text/javascript"></script>
    <link href="resource/jquery-easyui-theme/default/easyui.css" rel="stylesheet">
    <link href="resource/jquery-easyui-theme/icon.css" rel="stylesheet">
    <script src="resource/jquery-easyui-1.3.6/jquery.easyui.min.js" type="text/javascript"></script>
    <script src="resource/jquery-easyui-1.3.6/locale/easyui-lang-zh_CN.js" type="text/javascript"></script>
    <script src="resource/release/jquery.jdirk.min.js" type="text/javascript"></script>
    <link href="resource/icons/icon-all.min.css" rel="stylesheet">
    <script src="resource/release/jeasyui.icons.all.min.js" type="text/javascript"></script>
    <link href="resource/release/jeasyui.extensions.min.css" rel="stylesheet"/>
    <script src="resource/release/jeasyui.extensions.all.min.js" type="text/javascript"></script>
</head>
<body>
<div id="tb">
    <a href="#" id="addBtn" class="easyui-linkbutton" data-options="iconCls:'icon-add',plain:true">添加</a>
</div>
<table id="treeGrid" toolbar="#tb"></table>
</body>
</html>
<script type="text/javascript">
    var treeGrid;
    $(document).ready(function() {
        var demoTreeGrid = $("#treeGrid");
        treeGrid = demoTreeGrid .treegrid({
            title: 'This is TreeGrid',
            width: 900,
            height: 400,
            method: "get",
            url: "json/treegrid-data.json",
            idField: 'id',
            treeField: 'name',
            remoteSort: false,
            animate: true,
            frozenColumns: [[
                { field: 'ck', checkbox: true },
                { field: 'id', title: 'ID(id)', width: 80, sortable: true }
            ]],
            columns: [[
                { field: 'name', title: '名称(name)', width: 180, editor: 'text', sortable: true },
                { field: 'age', title: '年龄(age)', width: 120, editor: 'text', sortable: true },
                { field: 'weight', title: '体重(weight)', width: 120, editor: 'text', sortable: true },
                { field: 'size', title: 'Size(size)', width: 140, editor: 'text' },
                { field: 'date', title: '日期(date)', width: 140, editor: 'text', sortable: true },
                { field: 'enabled', title: '测试(不存在的字段)', width: 140,
                    editor: {
                    type:'checkbox',
                    options:{
                        on: '是',
                        off: '否'
                    }
                } }
            ]],
            enableHeaderClickMenu: false,
            enableHeaderContextMenu: false,
            dndRow: true,                       //此属性开启此表格的行拖动排序功能
            moveMenu: { submenu: false, upLevel: true, up: true, down: true, downLevel: true },    //开始行右键菜单的移动列功能，此属性可丰富配置，详情见 API 文档
            selectOnRowContextMenu: true,       //此属性开启当右键点击行时自动选择该行的功能
            toggleOnClick: true,
            autoFocusField: "name",
            autoEditing: true,          //该属性启用双击行时自定开启该行的编辑状态
            extEditing: true,           //该属性启用行编辑状态的 ExtEditing 风格效果，该属性默认为 true。
            singleEditing: true,        //该属性启用datagrid的只允许单行编辑效果，该属性默认为 true。
            //通过拖动数据行以及右键菜单移动行数据时，都会触发 onDrop 事件。
            onDrop: function (target, source, point) {
                $.messager.show($.string.format("您刚才将节点 {0} 移向了节点 {1} 的 {2} 位置", source.name, target.name, point));
            },
            autoBindDblClickRow: false,

            rowContextMenu: [
                { text: "remove", handler: function (e, node) { t.treegrid("remove", node.id); } }
            ],
            pagination: true,
            pageSize: 10,
            pageList: [10, 20, 50, 100],
            rownumbers: true
        });

        // 行编辑一定要以这种方式来做...
        treeGrid.treegrid({
            onAfterEdit: function (data) {
                $.fn.treegrid.extensions.onAfterEdit.apply(this, arguments);  //这句一定要加上。
                alert(data.enabled);
            }
        });

        // 点击某个按钮添加一行
        $("#addBtn").bind("click", function () {
            var node = demoTreeGrid.treegrid('getSelected');
            var appendNode = {};
            if (node) {
                appendNode.parent = node.id;
            }
            appendNode.data = [
                { id:"newNode", name: "测试节点B"}
            ];
            demoTreeGrid.treegrid("append", appendNode);
            // 使新添加的行处于编辑状态
            demoTreeGrid.treegrid('beginEdit', 'newNode');
        });
    });
</script>